# Hash Table 
해시 테이블 = 버켓배열 + 해시함수
항목들의 키를 주소로 매핑 1차원 배열에 사전 항목들을 저장
# 성능
탐색, 삽입, 삭제 : O(n)-최악, O(1)-기대시간.
# 설계

## 해시테이블 = 해시함수 + 버켓배열

- **해시함수** = 해시 코드맵 + 압축맵

## 해시 테이블의 구성

해시 테이블 = 해시함수(해시 코드맵 + 압축맵) + 버켓 배열

---

## 압축맵

문제에서 요구된 조건은 **버켓 배열의 크기를 31개**로 세팅하는 것입니다. 여기서 왜 31로 설정했는지에 대한 이유는 다음과 같습니다:

### 이유

1. **해시 충돌 최소화**: 서로 다른 key들이 해시 함수에 의해 동일한 인덱스로 매핑될 수 있습니다. 해시 테이블의 크기를 짝수나 제곱수로 설정하면 충돌 가능성이 커질 수 있습니다.
2. **모듈러 연산 효과**: 소수로 설정했을 경우, 해시 값이 더 고르게 분포되는 경향이 있습니다.
3. **해시 함수의 성능 최적화**: 소수로 설정하면 해시 함수의 분포 성능이 최적화됩니다.
4. **사이클 회피**: 특정 패턴의 키들이 일정 간격으로 해시 테이블에서 충돌하는 사이클이 발생할 수 있습니다. 소수 크기를 사용하면 이러한 사이클을 최소화할 수 있습니다.

결론: **31**은 소수이기 때문에 선택되었습니다.

---

## 해시 코드맵

### 고려사항

1. **충돌 방지**: 최대한 해시 충돌을 방지할 수 있는 방법을 고려해야 합니다.
   - **대안**: 해시 코드맵 방식 중 **다항누적 방식 (Polynomial Accumulation)** 을 적용하기로 결정했습니다.
   - **이유**: 다항누적 방식이 문자열에 적합하다고 알려져 있습니다. 학교 알고리즘 교안의 "해시테이블" 강의 자료를 참고했습니다.

### 방법

1. **비트 분할**: 키의 비트들을 고정길이(예: 8, 16, 32 bits)로 분할합니다.
   - 예: `a(0), a(1), a(2), ......, a(n-1)`
2. **다항식 계산**: 고정값 `z`를 사용하여 각 요소의 위치에 따른 계산을 부과한 다항식 `p(z)`를 계산합니다.
   - `p(z) = a0 + a1*z + a2*z^2 + a3*z^3 + ..... + a(n-1)*z^(n-1)`
   - 여기서 **오버플로우**가 발생할 수 있는데, 이 부분을 적절히 처리해야 합니다. 교안에서는 오버플로우를 무시하라고 했지만, 실제 코딩 시에는 처리 방법을 고려해야 합니다.

### 기대 성능

- 고정값 `z=33`을 선택할 경우, 50,000개의 영단어에 대해 6회의 충돌이 발생했습니다.
- 학교 과제는 key값이 정수였지만, 실제 작업에서는 key값이 문자열이므로 학교 과제 코드를 재활용하기는 어렵습니다. 처음부터 다시 작성해야 합니다.

---

## 리팩토링 제안

### 1. 해시테이블의 적재율 (Load Factor)

- **적재율**: `lf = n/M`
  - 적재율은 가능한 낮게 유지해야 하며, **1 이하**로 유지하는 것이 좋습니다.
  - 현재 문제에서 주어진 방법은 "분리연쇄법"을 사용하고 있습니다.
    - `lf > 1`: 작동하지만 비효율적입니다.
    - `lf < 1`: 가능하면 **0.75 미만**으로 유지해야 O(1) 기대 실행 시간을 달성할 수 있습니다.

### 2. 재해싱 (Rehashing)

- **재해싱 필요성**: 적재율을 일정 수준 이하(예: 0.75)로 유지하기 위해 원소를 삽입할 때 재해싱을 수행합니다.

#### 재해싱 조건

1. 적재율이 최적치를 초과했을 때
2. 원소 삽입에 실패했을 때 (예외 처리 필요)
3. 너무 많은 비활성 셀이 존재하여 성능이 저하될 때

#### 재해싱 단계

1. 버켓 배열의 크기를 증가시킵니다. (원래 배열의 **2배 크기**로 증가시키며, 이때 **소수**로 설정합니다.)
2. 새 크기에 대응하도록 **압축맵**을 수정합니다.
3. 새 압축맵을 사용하여 기존 해시테이블의 모든 원소를 새 테이블에 삽입합니다.


# 후기
- 굳이 Z 고정값을 설정한것과 안한것의 차이가 거의없다
    - 아마도 표본이 50개만 있어서 그런듯하다.
